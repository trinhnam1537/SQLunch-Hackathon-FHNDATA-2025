<div class="admin-home-container">
  <!-- Dashboard Navigator -->
  <div class="dashboard-navigator">
    <div class="navigator-header">
      <div class="header-left-group"> 
        <h2>Analytics Dashboard</h2>
        {{> dateFilter}} <!-- Ho·∫∑c div.date-filter c≈© -->
    </div>
    </div>

    <div class="navigator-buttons">
      <button class="dashboard-btn active" data-dashboard="finance">
        <i class="fi fi-rr-briefcase"></i>
        <span>Finance</span>
      </button>
      <button class="dashboard-btn" data-dashboard="order">
        <i class="fi fi-rr-shopping-cart"></i>
        <span>Orders</span>
      </button>
      <button class="dashboard-btn" data-dashboard="customer">
        <i class="fi fi-rr-users"></i>
        <span>Customers</span>
      </button>
      <button class="dashboard-btn" data-dashboard="employee">
        <i class="fi fi-rr-employees"></i>
        <span>Employees</span>
      </button>
      <button class="dashboard-btn" data-dashboard="product">
        <i class="fi fi-rr-box-open"></i>
        <span>Products</span>
      </button>
      <button class="dashboard-btn" data-dashboard="brand">
        <i class="fi fi-rr-brand"></i>
        <span>Brands</span>
      </button>
      <button class="dashboard-btn" data-dashboard="store">
        <i class="fi fi-rr-store-alt"></i>
        <span>Stores</span>
      </button>
      <button class="dashboard-btn" data-dashboard="purchase">
        <i class="fi fi-rr-file-import"></i>
        <span>Purchases</span>
      </button>
      <button class="dashboard-btn" data-dashboard="supplier">
        <i class="fi fi-rr-supplier"></i>
        <span>Suppliers</span>
      </button>
    </div>
  </div>
  
  <div class="table finance">
    <div class="loading-overlay" style="display: none;">
      <div class="spinner"></div>
    </div>
    <div class="finance"></div>
    
    <!-- Daily Revenue Chart Container -->
    <div id="daily-revenue-container" style="margin-top: 24px; padding: 20px; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); border: 2px solid #4E79A7; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);"></div>
    
    <!-- 3 Side-by-side Charts Container -->
    <div id="revenue-charts-container" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-top: 24px; width: 100%;">
      <!-- Brand Chart -->
      <div id="brand-chart-wrapper" style="padding: 16px; background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);"></div>
      <!-- Category Chart -->
      <div id="category-chart-wrapper" style="padding: 16px; background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);"></div>
      <!-- Subcategory Chart -->
      <div id="subcategory-chart-wrapper" style="padding: 16px; background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);"></div>
    </div>
  </div>

  <div class="table order">
    <div class="loading-overlay" style="display: none;">
      <div class="spinner"></div>
    </div>
    <div class="order"></div>
    
    <!-- Order Analytics: Payment Success & Add-to-Cart -->
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0;">
      <div style="padding: 16px; background: #eef6ff; border-left: 4px solid #6f42c1; border-radius: 4px;">
        <h6 style="color: #6f42c1; margin: 0 0 6px 0;">Payment Success Rate</h6>
        <h3 id="home-payment-success-rate" style="margin: 0;">-</h3>
      </div>
      <div style="padding: 16px; background: #fff0f6; border-left: 4px solid #e83e8c; border-radius: 4px;">
        <h6 style="color: #e83e8c; margin: 0 0 6px 0;">Add to Cart Rate</h6>
        <h3 id="home-add-to-cart-rate" style="margin: 0;">-</h3>
      </div>
    </div>

    <div style="padding: 12px; background: #fff; border-radius: 4px; border: 1px solid #ddd; margin-bottom: 20px;">
      <h6 style="color: #6f42c1; margin: 0 0 8px 0;">Payment Success Rate by Method</h6>
      <div id="home-add-to-cart-by-method">
        <p style="color: #999;">Loading...</p>
      </div>
    </div>

    <div style="display: flex; gap: 20px; align-items: center; justify-content: center;">
      <div style="width: 70%;"><canvas id="order"></canvas></div>
      <div style="width: 30%;"><canvas id="order-status"></canvas></div>
    </div>
  </div>

  <div class="table customer">
    <div class="loading-overlay" style="display: none;">
      <div class="spinner"></div>
    </div>
    <div class="customer"></div>
    
    <!-- Session KPIs -->
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0;">
      <div style="padding: 16px; background: #e8f5e9; border-left: 4px solid #4caf50; border-radius: 4px;">
        <h6 style="color: #4caf50; margin: 0 0 6px 0;">Sessions > 5s</h6>
        <h3 id="home-long-sessions-ratio" style="margin: 0;">-</h3>
      </div>
      <div style="padding: 16px; background: #fff3e0; border-left: 4px solid #ff9800; border-radius: 4px;">
        <h6 style="color: #ff9800; margin: 0 0 6px 0;">User Comeback Rate</h6>
        <h3 id="home-comeback-rate" style="margin: 0;">-</h3>
      </div>
    </div>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; align-items: center;">
      <div style="display: flex; justify-content: center;"><canvas id="customer-membership" style="max-height: 400px; max-width: 400px;"></canvas></div>
      <div><canvas id="customer"></canvas></div>
    </div>
    <div style="max-width: 800px; margin: 0 auto; width: 100%; height: 480px;">
      <canvas id="customer-online" style="height: 100% !important;"></canvas>
    </div>
  </div> 
  
  <div class="table employee">
    <div class="loading-overlay" style="display: none;">
      <div class="spinner"></div>
    </div>
    <div class="employee"></div>
    
    <div style="display: flex; gap: 20px; align-items: center; justify-content: center;">
      <div style="width: 70%;"><canvas id="employee"></canvas></div>
      <div style="width: 30%;"><canvas id="employee-role"></canvas></div>
    </div>
  </div> 
  
  <div class="table product">
    <div class="loading-overlay" style="display: none;">
      <div class="spinner"></div>
    </div>
    <div class="product"></div>
    
    <!-- Product Analytics: Views & Sales -->
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0;">
      <div style="padding: 16px; background: #e8f8f5; border-left: 4px solid #1cc88a; border-radius: 4px;">
        <h6 style="color: #1cc88a; margin: 0 0 6px 0;">Total Views</h6>
        <h3 id="home-total-views" style="margin: 0;">-</h3>
      </div>
      <div style="padding: 16px; background: #fff8e8; border-left: 4px solid #f6c23e; border-radius: 4px;">
        <h6 style="color: #f6c23e; margin: 0 0 6px 0;">Total Sales</h6>
        <h3 id="home-total-sales" style="margin: 0;">-</h3>
      </div>
    </div>

    <!-- Top Viewed & Top Purchased -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
      <div style="padding: 12px; background: #fff; border-radius: 4px; border: 1px solid #ddd;">
        <h6 style="color: #1cc88a; margin: 0 0 8px 0;">üëÅÔ∏è Top Viewed</h6>
        <div id="home-top-viewed" style="font-size: 12px;">
          <p style="color: #999;">Loading...</p>
        </div>
      </div>
      <div style="padding: 12px; background: #fff; border-radius: 4px; border: 1px solid #ddd;">
        <h6 style="color: #17a2b8; margin: 0 0 8px 0;">üõçÔ∏è Top Purchased</h6>
        <div id="home-top-purchased" style="font-size: 12px;">
          <p style="color: #999;">Loading...</p>
        </div>
      </div>
    </div>

    <div style="display: flex; gap: 20px; align-items: center; justify-content: center;">
      <div style="width: 70%;"><canvas id="product"></canvas></div>
    </div>
  </div> 

  <div class="table brand">
    <div class="loading-overlay" style="display: none;">
      <div class="spinner"></div>
    </div>
    <div class="brand"></div>
  </div>
 
  <div class="table store">
    <div class="loading-overlay" style="display: none;">
      <div class="spinner"></div>
    </div>
    <div class="store"></div>
  </div>

  <div class="table purchase">
    <div class="loading-overlay" style="display: none;">
      <div class="spinner"></div>
    </div>
    <div class="purchase"></div>
    <div><canvas id="purchase"></canvas></div>
  </div>

  <div class="table supplier">
    <div class="loading-overlay" style="display: none;">
      <div class="spinner"></div>
    </div>
    <div class="supplier"></div>
    <div><canvas id="supplier"></canvas></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/luxon"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.js"></script>
<script src="/js/admin/home.js"></script>